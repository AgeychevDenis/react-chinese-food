(this["webpackJsonpreact-chinese-food"]=this["webpackJsonpreact-chinese-food"]||[]).push([[0],{46:function(t,e,c){},70:function(t,e,c){"use strict";c.r(e);var a=c(0),i=c.n(a),r=c(17),s=c.n(r),n=c(10),o=c(9),l=c(13),d=c(32),j=c(4),b={items:[],isLoaded:!1},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_FOODS":return Object(j.a)(Object(j.a)({},t),{},{items:e.payload,isLoaded:!0});case"SET_LOADED":return Object(j.a)(Object(j.a)({},t),{},{isLoaded:e.payload});default:return t}},m=c(18),u=c(36),h={items:{},totalPrice:0,totalCount:0},p=function(t){return t.reduce((function(t,e){return e.price+t}),0)},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_FOOD_CART":var c=t.items[e.payload.id]?[].concat(Object(u.a)(t.items[e.payload.id].items),[e.payload]):[e.payload],a=Object(j.a)(Object(j.a)({},t.items),{},Object(m.a)({},e.payload.id,{items:c,totalPrice:p(c)})),i=Object.keys(a).reduce((function(t,e){return a[e].items.length+t}),0),r=Object.keys(a).reduce((function(t,e){return a[e].totalPrice+t}),0);return Object(j.a)(Object(j.a)({},t),{},{items:a,totalCount:i,totalPrice:r});case"REMOVE_CART_ITEM":var s=Object(j.a)({},t.items),n=s[e.payload].totalPrice,o=s[e.payload].items.length;return delete s[e.payload],Object(j.a)(Object(j.a)({},t),{},{items:s,totalPrice:t.totalPrice-n,totalCount:t.totalCount-o});default:return t}},_=Object(l.b)({foods:O,cart:x}),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,v=Object(l.d)(_,f(Object(l.a)(d.a))),y=(c(46),c.p+"static/media/basket.903dae68.svg"),g=c(33),N=c.n(g),C=c(1),k=function(t){var e=t.onClick,c=t.className,a=t.outline,i=t.children;return Object(C.jsx)("button",{onClick:e,className:N()("button",c,{"button--outline":a}),children:i})};function E(t){var e=t.id,c=t.name,a=t.description,i=t.price,r=t.count,s=t.type,n=t.imageUrl,o=t.onClickAddFood;return Object(C.jsxs)("div",{className:"product-item__wrapper",children:[Object(C.jsxs)("div",{className:"product-item__inner",children:[Object(C.jsx)("div",{className:"product-item__img",children:Object(C.jsx)("img",{src:n,alt:"\u0423\u0441\u0442\u0440\u0438\u0446\u044b \u043f\u043e \u0440\u043e\u043a\u0444\u0435\u043b\u043b\u0435\u0440\u043e\u0432\u0441\u043a\u0438"})}),Object(C.jsx)("h3",{className:"product-item__title",children:c}),Object(C.jsx)("p",{className:"product-item__description",children:a})]}),Object(C.jsxs)("div",{className:"product-item__block",children:[Object(C.jsxs)("p",{className:"product-item__price",children:[i," \u20bd",Object(C.jsxs)("span",{children:["/ ",r," ",s]})]}),Object(C.jsx)(k,{onClick:function(){o({id:e,name:c,imageUrl:n,price:i})},className:"product-item__btn",children:"+"})]})]})}E.defaultProps={name:"---",description:"---",price:0,count:0,type:"--"};var w=E,D=c(34);var P=function(){return Object(C.jsxs)(D.a,{speed:2,width:310,height:550,viewBox:"0 0 310 550",backgroundColor:"#242424",foregroundColor:"#545454",children:[Object(C.jsx)("circle",{cx:"585",cy:"227",r:"8"}),Object(C.jsx)("circle",{cx:"587",cy:"230",r:"8"}),Object(C.jsx)("circle",{cx:"590",cy:"224",r:"8"}),Object(C.jsx)("circle",{cx:"148",cy:"158",r:"135"}),Object(C.jsx)("rect",{x:"22",y:"316",rx:"0",ry:"0",width:"268",height:"30"}),Object(C.jsx)("rect",{x:"23",y:"362",rx:"0",ry:"0",width:"268",height:"50"}),Object(C.jsx)("rect",{x:"25",y:"476",rx:"0",ry:"0",width:"131",height:"28"}),Object(C.jsx)("circle",{cx:"273",cy:"488",r:"15"})]})};var T=function(t){var e=t.id,c=t.name,a=t.totalPrice,i=t.imageUrl,r=t.totalCount,s=t.onRemove;return Object(C.jsxs)("div",{className:"cart-item__wrapper",children:[Object(C.jsx)("div",{className:"cart-item__img",children:Object(C.jsx)("img",{src:i,alt:"\u0443\u0441\u0442\u0440\u0438\u0446\u0430"})}),Object(C.jsx)("h4",{className:"cart-item__title",children:c}),Object(C.jsxs)("p",{children:[r," \u0448\u0442."]}),Object(C.jsxs)("div",{className:"cart-item__price",children:[Object(C.jsxs)("p",{children:[a," \u20bd"]}),Object(C.jsx)(k,{onClick:function(){s(e)},className:"cart-item__btn"})]})]})},A=c(35),S=c.n(A),R=function(t){return{type:"SET_FOODS",payload:t}};var L=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.foods.items})),c=Object(o.c)((function(t){return t.foods.isLoaded})),a=Object(o.c)((function(t){return t.cart})),r=a.totalPrice,s=a.totalCount,l=function(e){t({type:"ADD_FOOD_CART",payload:e})};return i.a.useEffect((function(){t((function(t){t({type:"SET_LOADED",payload:!1}),S.a.get("http://myjson.dit.upm.es/api/bins/c2ox").then((function(e){var c=e.data;t(R(c))}))}))}),[t]),Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{className:"catalog__block",children:[Object(C.jsx)("h1",{className:"catalog__title",children:"\u043d\u0430\u0448\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044f"}),Object(C.jsxs)("div",{className:"catalog__basket",children:[Object(C.jsxs)("div",{className:"catalog__basket-items",children:[Object(C.jsxs)("span",{children:[s," \u0442\u043e\u0432\u0430\u0440\u0430"]}),Object(C.jsxs)("span",{children:["\u043d\u0430 \u0441\u0443\u043c\u043c\u0443 ",r," \u20bd"]})]}),Object(C.jsx)(n.b,{to:"/cart",children:Object(C.jsx)("button",{className:"catalog__basket-img",children:Object(C.jsx)("img",{src:y,alt:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"})})})]})]}),Object(C.jsx)("div",{className:"catalog__inner product-item",children:c?e.foods.map((function(t){return Object(C.jsx)(w,Object(j.a)({onClickAddFood:l},t),t.id)})):Array(8).fill(0).map((function(t,e){return Object(C.jsx)(P,{},e)}))})]})},F=c.p+"static/media/add_shopping.38cd5eea.svg";var M=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.cart})),c=e.totalPrice,a=e.items,i=Object.keys(a).map((function(t){return a[t].items[0]})),r=function(e){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")&&t(function(t){return{type:"REMOVE_CART_ITEM",payload:t}}(e))};return Object(C.jsx)("main",{className:"cart",children:Object(C.jsxs)("div",{className:"cart__container",children:[c?Object(C.jsxs)("div",{className:"cart__top cart-item",children:[Object(C.jsx)("h1",{className:"cart__title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u0441 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u043c\u0438 \u0442\u043e\u0432\u0430\u0440\u0430\u043c\u0438"}),i.map((function(t){return Object(C.jsx)(T,{id:t.id,name:t.name,imageUrl:t.imageUrl,totalPrice:a[t.id].totalPrice,totalCount:a[t.id].items.length,onRemove:r},t.id)}))]}):Object(C.jsxs)("div",{className:"cart__add",children:[Object(C.jsx)("h2",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430\u044f"}),Object(C.jsx)("p",{children:"\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u0435\u0439 \u0432\u0441\u0435\u0433\u043e, \u0432\u044b \u043d\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u0438 \u0435\u0449\u0451 \u043d\u0430\u0448\u0438 \u0431\u043b\u044e\u0434\u0430. \u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c, \u043f\u0435\u0440\u0435\u0439\u0434\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}),Object(C.jsx)("img",{src:F,alt:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),Object(C.jsx)(n.b,{to:"/",className:"cart__add-link",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"})]}),Object(C.jsxs)("div",{className:"cart__bottom",children:[Object(C.jsxs)("p",{className:"cart__price-total",children:["\u0417\u0430\u043a\u0430\u0437 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443: ",Object(C.jsxs)("span",{children:[c," \u20bd"]})]}),Object(C.jsx)("a",{href:"#",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})},U=c(2);var I=function(){return Object(C.jsxs)("section",{className:"catalog",children:[Object(C.jsx)(U.a,{path:"/",component:L,exact:!0}),Object(C.jsx)(U.a,{path:"/cart",component:M,exact:!0})]})};s.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(n.a,{children:Object(C.jsx)(o.a,{store:v,children:Object(C.jsx)(I,{})})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.c3bd3fe2.chunk.js.map